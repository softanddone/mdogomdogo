---
// PhoneComparison.astro
const comparisonData = [
  {
    category: "Display & Screen",
    icon: "üì±",
    features: [
      {
        name: "Screen Size",
        iphone: '6.9" Super Retina XDR OLED',
        samsung: '6.9" Dynamic AMOLED 2X',
        winner: "tie",
      },
      {
        name: "Peak Brightness",
        iphone: "3,000 nits (outdoor)",
        samsung: "2,600 nits",
        winner: "iphone",
      },
      {
        name: "Refresh Rate",
        iphone: "ProMotion 120Hz adaptive",
        samsung: "LTPO 120Hz adaptive",
        winner: "tie",
      },
      {
        name: "Always-On Display",
        iphone: "‚úì Available",
        samsung: "‚úì Available",
        winner: "tie",
      },
    ],
  },
  {
    category: "Performance & Power",
    icon: "‚ö°",
    features: [
      {
        name: "Processor",
        iphone: "Apple A19 Pro (3nm)",
        samsung: "Snapdragon 8 Elite",
        winner: "iphone",
      },
      {
        name: "RAM",
        iphone: "12GB unified memory",
        samsung: "12GB LPDDR5X",
        winner: "tie",
      },
      {
        name: "Storage Options",
        iphone: "256GB/512GB/1TB/2TB",
        samsung: "256GB/512GB/1TB",
        winner: "iphone",
      },
      {
        name: "Expandable Storage",
        iphone: "‚úó Not supported",
        samsung: "‚úó Not supported",
        winner: "tie",
      },
    ],
  },
  {
    category: "Camera System",
    icon: "üì∏",
    features: [
      {
        name: "Main Camera",
        iphone: "48MP Fusion (f/1.78)",
        samsung: "200MP Wide (f/1.7)",
        winner: "samsung",
      },
      {
        name: "Ultra Wide",
        iphone: "48MP (f/2.2, 120¬∞ FOV)",
        samsung: "50MP (f/1.9, 120¬∞ FOV)",
        winner: "iphone",
      },
      {
        name: "Telephoto Zoom",
        iphone: "48MP (5x-8x optical)",
        samsung: "50MP (5x optical)",
        winner: "iphone",
      },
      {
        name: "Front Camera",
        iphone: "12MP TrueDepth",
        samsung: "12MP Selfie",
        winner: "tie",
      },
      {
        name: "Video Recording",
        iphone: "4K ProRes, Cinematic Mode",
        samsung: "8K/4K AI stabilization",
        winner: "iphone",
      },
    ],
  },
  {
    category: "Battery & Charging",
    icon: "üîã",
    features: [
      {
        name: "Battery Capacity",
        iphone: "~5,088 mAh",
        samsung: "5,000 mAh",
        winner: "iphone",
      },
      {
        name: "Wired Charging",
        iphone: "USB-C up to 30W",
        samsung: "45W Super Fast Charging",
        winner: "samsung",
      },
      {
        name: "Wireless Charging",
        iphone: "MagSafe 15W + Qi2",
        samsung: "15W Wireless + Reverse",
        winner: "tie",
      },
      {
        name: "Battery Life",
        iphone: "Best iPhone battery ever",
        samsung: "All-day heavy usage",
        winner: "iphone",
      },
    ],
  },
  {
    category: "Software & AI",
    icon: "ü§ñ",
    features: [
      {
        name: "Operating System",
        iphone: "iOS 19",
        samsung: "Android 15 + One UI 7",
        winner: "tie",
      },
      {
        name: "AI Features",
        iphone: "Apple Intelligence",
        samsung: "Galaxy AI + Gemini Live",
        winner: "samsung",
      },
      {
        name: "Software Updates",
        iphone: "5-7 years guaranteed",
        samsung: "7 major Android upgrades",
        winner: "samsung",
      },
      {
        name: "Voice Assistant",
        iphone: "Siri with Apple Intelligence",
        samsung: "Google Assistant + Bixby",
        winner: "samsung",
      },
    ],
  },
  {
    category: "Design & Build",
    icon: "üé®",
    features: [
      {
        name: "Materials",
        iphone: "Aluminum + Ceramic Shield 2",
        samsung: "Titanium + Gorilla Armor 2",
        winner: "samsung",
      },
      {
        name: "Weight",
        iphone: "~220g",
        samsung: "218g",
        winner: "samsung",
      },
      {
        name: "Water Resistance",
        iphone: "IP68 (6m/30min)",
        samsung: "IP68 (1.5m/30min)",
        winner: "iphone",
      },
      {
        name: "S Pen / Stylus",
        iphone: "‚úó Not supported",
        samsung: "‚úì Built-in S Pen",
        winner: "samsung",
      },
      {
        name: "Color Options",
        iphone: "Cosmic Orange, Deep Blue, Silver",
        samsung: "Multiple Titanium colors",
        winner: "tie",
      },
    ],
  },
];

const iphonePrice = "$1,199";
const samsungPrice = "$1,299";
const iphonePurchaseLink = "https://apple.com/iphone-17-pro-max";
const samsungPurchaseLink =
  "https://samsung.com/us/smartphones/galaxy-s25-ultra";
---

<style>
  .phone-comparison {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      sans-serif;
  }

  .header {
    text-align: center;
    margin-bottom: 3rem;
  }

  .header h1 {
    font-size: 3rem;
    font-weight: 800;
    color: #1a202c;
    margin-bottom: 0.5rem;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .header p {
    font-size: 1.25rem;
    color: #64748b;
    margin-bottom: 2rem;
  }

  .phones-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    margin-bottom: 3rem;
  }

  @media (min-width: 1024px) {
    .phones-grid {
      grid-template-columns: 1fr 1fr;
    }
  }

  .phone-card {
    background: white;
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    border: 1px solid #e2e8f0;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .phone-card::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(
      90deg,
      var(--brand-color),
      var(--brand-color-light)
    );
  }

  .phone-card.iphone {
    --brand-color: #007aff;
    --brand-color-light: #5ac8fa;
  }

  .phone-card.samsung {
    --brand-color: #1428a0;
    --brand-color-light: #7c3aed;
  }

  .phone-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
  }

  .phone-header {
    text-align: center;
    margin-bottom: 1.5rem;
  }

  .phone-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
  }

  .phone-title {
    font-size: 1.75rem;
    font-weight: 700;
    color: #1a202c;
    margin-bottom: 0.5rem;
  }

  .phone-subtitle {
    color: #64748b;
    margin-bottom: 1rem;
  }

  .phone-price {
    font-size: 2rem;
    font-weight: 800;
    color: var(--brand-color);
    margin-bottom: 1.5rem;
  }

  .buy-button {
    width: 100%;
    background: linear-gradient(
      135deg,
      var(--brand-color) 0%,
      var(--brand-color-light) 100%
    );
    color: white;
    border: none;
    border-radius: 12px;
    padding: 1rem 2rem;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-block;
    text-align: center;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  }

  .buy-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
  }

  .comparison-section {
    background: white;
    border-radius: 16px;
    margin-bottom: 2rem;
    overflow: hidden;
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
  }

  .section-header {
    background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
    color: white;
    padding: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .section-icon {
    font-size: 1.5rem;
  }

  .section-title {
    font-size: 1.25rem;
    font-weight: 600;
    margin: 0;
  }

  .comparison-table {
    display: grid;
    grid-template-columns: 1fr;
    gap: 0;
  }

  @media (min-width: 768px) {
    .comparison-table {
      grid-template-columns: 2fr 2fr 2fr;
    }
  }

  .table-header {
    background: #f8fafc;
    padding: 1rem;
    font-weight: 600;
    text-align: center;
    border-bottom: 1px solid #e2e8f0;
  }

  .feature-row {
    display: contents;
  }

  .feature-name {
    padding: 1rem;
    font-weight: 500;
    background: #f8fafc;
    border-bottom: 1px solid #e2e8f0;
    border-right: 1px solid #e2e8f0;
  }

  @media (max-width: 767px) {
    .feature-name {
      font-weight: 600;
      background: #e2e8f0;
      text-align: center;
    }
  }

  .feature-value {
    padding: 1rem;
    border-bottom: 1px solid #e2e8f0;
    text-align: center;
    position: relative;
    transition: background-color 0.3s ease;
  }

  .feature-value.winner {
    background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
    font-weight: 600;
  }

  .feature-value.winner::after {
    content: "üèÜ";
    position: absolute;
    right: 0.5rem;
    top: 50%;
    transform: translateY(-50%);
    font-size: 0.8rem;
  }

  .feature-value.iphone {
    border-right: 3px solid #007aff;
  }

  .feature-value.samsung {
    border-right: 3px solid #1428a0;
  }

  .winner-banner {
    text-align: center;
    padding: 3rem 2rem;
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    border-radius: 20px;
    margin: 3rem 0;
    border: 2px solid #f59e0b;
  }

  .winner-title {
    font-size: 2rem;
    font-weight: 800;
    color: #92400e;
    margin-bottom: 1rem;
  }

  .winner-text {
    font-size: 1.25rem;
    color: #b45309;
    margin-bottom: 2rem;
  }

  .final-cta {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    margin-top: 2rem;
  }

  @media (min-width: 768px) {
    .final-cta {
      grid-template-columns: 1fr 1fr;
    }
  }

  .cta-card {
    background: white;
    padding: 2rem;
    border-radius: 16px;
    text-align: center;
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
    border: 2px solid transparent;
    transition: all 0.3s ease;
  }

  .cta-card.recommended {
    border-color: #22c55e;
    box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.1);
  }

  .recommended-badge {
    background: #22c55e;
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: 1rem;
    display: inline-block;
  }

  .score-display {
    text-align: center;
    margin: 2rem 0;
    padding: 2rem;
    background: white;
    border-radius: 16px;
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
  }

  .score-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    color: #1a202c;
  }

  .scores {
    display: flex;
    justify-content: space-around;
    align-items: center;
    gap: 2rem;
  }

  .score-item {
    text-align: center;
  }

  .score-value {
    font-size: 3rem;
    font-weight: 800;
    margin-bottom: 0.5rem;
  }

  .score-value.iphone {
    color: #007aff;
  }

  .score-value.samsung {
    color: #1428a0;
  }

  .score-label {
    font-weight: 600;
    color: #64748b;
  }

  @media (max-width: 767px) {
    .phone-comparison {
      padding: 1rem;
    }

    .header h1 {
      font-size: 2rem;
    }

    .comparison-table {
      display: block;
    }

    .table-header {
      display: none;
    }

    .feature-row {
      display: block;
      margin-bottom: 1rem;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .feature-value {
      border-right: none;
    }
  }
</style>

<div class="phone-comparison">
  <!-- Header -->
  <div class="header">
    <h1>Ultimate Flagship Battle 2025</h1>
    <p>
      iPhone 17 Pro Max vs Samsung Galaxy S25 Ultra - Find Your Perfect Match
    </p>
  </div>

  <!-- Phone Cards with Purchase CTAs -->
  <div class="phones-grid">
    <div class="phone-card iphone">
      <div class="phone-header">
        <div class="phone-icon">üì±</div>
        <h2 class="phone-title">iPhone 17 Pro Max</h2>
        <p class="phone-subtitle">Apple's Most Advanced iPhone Ever</p>
        <div class="phone-price">Starting at $1,199</div>
        <a href="https://amzn.to/470etVe" class="buy-button" id="iphone-cta">
          üõí Buy iPhone 17 Pro Max
        </a>
      </div>
    </div>

    <div class="phone-card samsung">
      <div class="phone-header">
        <div class="phone-icon">üì±</div>
        <h2 class="phone-title">Galaxy S25 Ultra</h2>
        <p class="phone-subtitle">Samsung's Productivity Powerhouse</p>
        <div class="phone-price">Starting at $1,299</div>
        <a href="https://amzn.to/4gTPkPG" class="buy-button" id="samsung-cta">
          üõí Buy Galaxy S25 Ultra
        </a>
      </div>
    </div>
  </div>

  <!-- Score Display -->
  <div class="score-display">
    <h3 class="score-title">Overall Comparison Score</h3>
    <div class="scores">
      <div class="score-item">
        <div class="score-value iphone" id="iphone-score">0</div>
        <div class="score-label">iPhone 17 Pro Max</div>
      </div>
      <div class="score-item">
        <div class="score-value samsung" id="samsung-score">0</div>
        <div class="score-label">Galaxy S25 Ultra</div>
      </div>
    </div>
  </div>

  <!-- Detailed Comparison -->
  {
    comparisonData.map((section) => (
      <div class="comparison-section">
        <div class="section-header">
          <span class="section-icon">{section.icon}</span>
          <h3 class="section-title">{section.category}</h3>
        </div>

        <div class="comparison-table">
          <div class="table-header">Feature</div>
          <div
            class="table-header"
            style="background: linear-gradient(135deg, #007AFF 0%, #5AC8FA 100%); color: white;"
          >
            iPhone 17 Pro Max
          </div>
          <div
            class="table-header"
            style="background: linear-gradient(135deg, #1428A0 0%, #7C3AED 100%); color: white;"
          >
            Galaxy S25 Ultra
          </div>

          {section.features.map((feature) => (
            <div class="feature-row">
              <div class="feature-name">{feature.name}</div>
              <div
                class={`feature-value iphone ${feature.winner === "iphone" ? "winner" : ""}`}
              >
                {feature.iphone}
              </div>
              <div
                class={`feature-value samsung ${feature.winner === "samsung" ? "winner" : ""}`}
              >
                {feature.samsung}
              </div>
            </div>
          ))}
        </div>
      </div>
    ))
  }

  <!-- Winner Banner -->
  <div class="winner-banner" id="winner-banner" style="display: none;">
    <h2 class="winner-title" id="winner-title">üèÜ And The Winner Is...</h2>
    <p class="winner-text" id="winner-text">
      Based on our comprehensive analysis
    </p>

    <div class="final-cta">
      <div class="cta-card" id="winner-cta">
        <div class="recommended-badge">üèÜ RECOMMENDED CHOICE</div>
        <h3 id="winner-phone">Winner Phone</h3>
        <p>The best choice based on features and value</p>
        <a href="#" class="buy-button" id="winner-buy-button">
          üõí Get The Winner - Best Value
        </a>
      </div>

      <div class="cta-card">
        <h3 id="runner-up-phone">Runner Up</h3>
        <p>Still an excellent choice with unique strengths</p>
        <a href="#" class="buy-button" id="runner-up-buy-button">
          üõí Or Choose This One
        </a>
      </div>
    </div>
  </div>
</div>

<script>
  // Calculate scores and determine winner
  function calculateScores() {
    const features = document.querySelectorAll(".feature-value.winner");
    let iphoneScore = 0;
    let samsungScore = 0;

    features.forEach((feature) => {
      if (feature.classList.contains("iphone")) {
        iphoneScore++;
      } else if (feature.classList.contains("samsung")) {
        samsungScore++;
      }
    });

    // Animate score counting
    animateScore("iphone-score", iphoneScore);
    animateScore("samsung-score", samsungScore);

    // Determine and display winner
    setTimeout(() => {
      displayWinner(iphoneScore, samsungScore);
    }, 2000);
  }

  function animateScore(elementId, targetScore) {
    const element = document.getElementById(elementId);
    let currentScore = 0;
    const increment = targetScore / 20;

    const timer = setInterval(() => {
      currentScore += increment;
      if (currentScore >= targetScore) {
        currentScore = targetScore;
        clearInterval(timer);
      }
      element.textContent = Math.floor(currentScore);
    }, 100);
  }

  function displayWinner(iphoneScore, samsungScore) {
    const winnerBanner = document.getElementById("winner-banner");
    const winnerTitle = document.getElementById("winner-title");
    const winnerText = document.getElementById("winner-text");
    const winnerPhone = document.getElementById("winner-phone");
    const runnerUpPhone = document.getElementById("runner-up-phone");
    const winnerCta = document.getElementById("winner-cta");
    const winnerBuyButton = document.getElementById("winner-buy-button");
    const runnerUpBuyButton = document.getElementById("runner-up-buy-button");

    let winner, runnerUp, winnerLink, runnerUpLink;

    if (iphoneScore > samsungScore) {
      winner = "iPhone 17 Pro Max";
      runnerUp = "Galaxy S25 Ultra";
      winnerLink = "https://apple.com/iphone-17-pro-max";
      runnerUpLink = "https://samsung.com/us/smartphones/galaxy-s25-ultra";
      winnerTitle.textContent = "üèÜ iPhone 17 Pro Max Wins!";
      winnerText.textContent = `Leading with ${iphoneScore} category wins vs ${samsungScore}. Superior display brightness, performance, and camera zoom make it the clear winner.`;
    } else if (samsungScore > iphoneScore) {
      winner = "Galaxy S25 Ultra";
      runnerUp = "iPhone 17 Pro Max";
      winnerLink = "https://samsung.com/us/smartphones/galaxy-s25-ultra";
      runnerUpLink = "https://apple.com/iphone-17-pro-max";
      winnerTitle.textContent = "üèÜ Galaxy S25 Ultra Wins!";
      winnerText.textContent = `Dominating with ${samsungScore} category wins vs ${iphoneScore}. S Pen productivity, titanium build, and versatile AI features secure the victory.`;
    } else {
      winnerTitle.textContent = "ü§ù It's a Tie!";
      winnerText.textContent = `Both phones excel in ${iphoneScore} categories each. Your choice depends on ecosystem preference.`;
      winner = "iPhone 17 Pro Max";
      runnerUp = "Galaxy S25 Ultra";
      winnerLink = "https://apple.com/iphone-17-pro-max";
      runnerUpLink = "https://samsung.com/us/smartphones/galaxy-s25-ultra";
    }

    winnerPhone.textContent = winner;
    runnerUpPhone.textContent = runnerUp;
    winnerBuyButton.href = winnerLink;
    runnerUpBuyButton.href = runnerUpLink;
    winnerBuyButton.textContent = `üõí Get ${winner}`;
    runnerUpBuyButton.textContent = `üõí Choose ${runnerUp}`;

    winnerBanner.style.display = "block";
    winnerBanner.scrollIntoView({ behavior: "smooth" });
  }

  // Track clicks for conversion optimization
  function trackPurchaseIntent(phone, source) {
    // Analytics tracking would go here
    console.log(`Purchase intent: ${phone} from ${source}`);

    // You could send this data to your analytics platform
    // gtag('event', 'purchase_intent', {
    //   'phone_model': phone,
    //   'click_source': source
    // });
  }

  // Add click tracking to all CTA buttons
  document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("iphone-cta").addEventListener("click", () => {
      trackPurchaseIntent("iPhone 17 Pro Max", "hero_cta");
    });

    document.getElementById("samsung-cta").addEventListener("click", () => {
      trackPurchaseIntent("Galaxy S25 Ultra", "hero_cta");
    });

    // Calculate scores after DOM is loaded
    setTimeout(calculateScores, 1000);
  });
</script>
